<div class="flex flex-col flex-1 overflow-hidden p-4" style="height: calc(100vh - 48px)">
	<div class="flex justify-between items-center mb-3">
		<div class="flex items-baseline gap-3">
			<h2 class="text-xl font-semibold">Library</h2>
			@if (stats()) {
				<span class="text-sm text-base-content/60">
					@if (showDuplicatesOnly()) {
						{{ displayedCharts().length }} duplicates
					} @else if (totalFilteredCount() !== stats()!.totalCharts) {
						{{ charts().length }} of {{ totalFilteredCount() }} filtered ({{ stats()!.totalCharts }} total)
					} @else {
						{{ charts().length }} of {{ stats()!.totalCharts }} charts
					}
				</span>
			}
		</div>
		<div class="flex gap-2">
			<button class="btn btn-sm btn-primary" (click)="scanLibrary()" [disabled]="isScanning()">
				<i class="bi bi-arrow-clockwise" [class.animate-spin]="isScanning()"></i>
				@if (isScanning()) {
					<span>Scanning...</span>
				}
				@if (!isScanning()) {
					<span>Scan</span>
				}
			</button>
		</div>
	</div>

	@if (settingsService.libraryFolders.length > 0) {
		<div class="text-xs text-base-content/50 mb-3 truncate"><i class="bi bi-folder"></i> {{ settingsService.libraryFolders.length }} folder(s) configured</div>
	}

	@if (scanProgress() && isScanning()) {
		<div class="mb-3">
			<progress class="progress progress-primary w-full" [value]="scanProgressPercent()" max="100"></progress>
			<div class="flex justify-between text-xs text-base-content/60 mt-1">
				<span>{{ scanProgress()!.message }}</span>
				<span>{{ scanProgress()!.current }} / {{ scanProgress()!.total }}</span>
			</div>
		</div>
	}

	@if (stats() && stats()!.totalCharts > 0) {
		<div class="grid grid-cols-6 gap-3 mb-4">
			<div class="stats shadow bg-base-200 cursor-pointer hover:bg-base-300" (click)="clearFilters()">
				<div class="stat py-2 px-4">
					<div class="stat-value text-lg">{{ stats()!.totalCharts }}</div>
					<div class="stat-title text-xs">Total</div>
				</div>
			</div>
			<div
				class="stats shadow cursor-pointer hover:bg-base-300"
				[class.bg-primary]="filter().hasVideo === false"
				[class.bg-base-200]="filter().hasVideo !== false"
				(click)="filterByAsset('video', filter().hasVideo === false ? undefined : false)">
				<div class="stat py-2 px-4">
					<div class="stat-value text-lg text-warning">{{ missingVideoCount() }}</div>
					<div class="stat-title text-xs">No Video</div>
				</div>
			</div>
			<div
				class="stats shadow cursor-pointer hover:bg-base-300"
				[class.bg-primary]="filter().hasBackground === false"
				[class.bg-base-200]="filter().hasBackground !== false"
				(click)="filterByAsset('background', filter().hasBackground === false ? undefined : false)">
				<div class="stat py-2 px-4">
					<div class="stat-value text-lg text-warning">{{ missingBackgroundCount() }}</div>
					<div class="stat-title text-xs">No BG</div>
				</div>
			</div>
			<div
				class="stats shadow cursor-pointer hover:bg-base-300"
				[class.bg-primary]="filter().hasAlbumArt === false"
				[class.bg-base-200]="filter().hasAlbumArt !== false"
				(click)="filterByAsset('albumArt', filter().hasAlbumArt === false ? undefined : false)">
				<div class="stat py-2 px-4">
					<div class="stat-value text-lg text-warning">{{ missingAlbumArtCount() }}</div>
					<div class="stat-title text-xs">No Art</div>
				</div>
			</div>
			<div
				class="stats shadow cursor-pointer hover:bg-base-300"
				[class.bg-primary]="filter().hasLyrics === false"
				[class.bg-base-200]="filter().hasLyrics !== false"
				(click)="filterByAsset('lyrics', filter().hasLyrics === false ? undefined : false)">
				<div class="stat py-2 px-4">
					<div class="stat-value text-lg text-warning">{{ missingLyricsCount() }}</div>
					<div class="stat-title text-xs">No Lyrics</div>
				</div>
			</div>
			<div
				class="stats shadow cursor-pointer hover:bg-base-300"
				[class.bg-primary]="showDuplicatesOnly()"
				[class.bg-base-200]="!showDuplicatesOnly()"
				(click)="toggleDuplicatesFilter()">
				<div class="stat py-2 px-4">
					<div class="stat-value text-lg text-info">{{ duplicateCount() }}</div>
					<div class="stat-title text-xs">Duplicates</div>
				</div>
			</div>
		</div>
	}

	<!-- Error Alert -->
	@if (deleteError()) {
		<div class="alert alert-error mb-3">
			<i class="bi bi-exclamation-triangle"></i>
			<div class="flex-1">
				<div class="font-semibold">Error</div>
				<div class="text-sm whitespace-pre-wrap">{{ deleteError() }}</div>
			</div>
			<button class="btn btn-sm btn-ghost" (click)="dismissError()">
				<i class="bi bi-x"></i>
			</button>
		</div>
	}

	<!-- Search and basic filters row -->
	<div class="flex gap-2 mb-2 items-center flex-wrap">
		<div class="join">
			<input
				type="text"
				placeholder="Search..."
				class="input input-sm input-bordered join-item w-48"
				[value]="searchQuery()"
				(input)="onSearchInput($event)" />
			@if (searchQuery()) {
				<button class="btn btn-sm btn-ghost join-item" (click)="clearSearch()">
					<i class="bi bi-x"></i>
				</button>
			}
		</div>
		<select class="select select-sm select-bordered w-36" [value]="filter().artist || ''" (change)="filterByArtist($any($event.target).value)">
			<option value="">All Artists</option>
			@for (artist of artistOptions(); track artist) {
				<option [value]="artist">{{ artist }}</option>
			}
		</select>
		<select class="select select-sm select-bordered w-36" [value]="filter().charter || ''" (change)="filterByCharter($any($event.target).value)">
			<option value="">All Charters</option>
			@for (charter of charterOptions(); track charter) {
				<option [value]="charter">{{ stripHtmlTags(charter) }}</option>
			}
		</select>
		<select class="select select-sm select-bordered w-28" [value]="filter().chartType || ''" (change)="filterByChartType($any($event.target).value)">
			<option value="">All Types</option>
			<option value="chart">.chart</option>
			<option value="mid">.mid</option>
		</select>
		<button class="btn btn-sm btn-ghost" [class.btn-active]="showFiltersExpanded()" (click)="toggleFilters()"><i class="bi bi-funnel"></i> More</button>
		@if (hasActiveFilters()) {
			<button class="btn btn-sm btn-ghost" (click)="clearFilters()"><i class="bi bi-x-circle"></i> Clear</button>
		}
		<div class="flex-1"></div>
		@if (selectedIds().size > 0) {
			<div class="flex gap-2 items-center">
				<span class="text-sm text-base-content/60">{{ selectedIds().size }} selected</span>
				<button class="btn btn-sm btn-error btn-outline" (click)="deleteSelectedCharts()" title="Delete selected charts">
					<i class="bi bi-trash"></i> Delete
				</button>
				<button class="btn btn-sm btn-ghost" (click)="clearSelection()">Clear</button>
			</div>
		}
	</div>

	<!-- Expanded filters panel -->
	@if (showFiltersExpanded()) {
		<div class="bg-base-200 rounded-lg p-3 mb-3 grid grid-cols-6 gap-3">
			<div>
				<label class="label py-0 text-xs">Genre</label>
				<select class="select select-xs select-bordered w-full" [value]="filter().genre || ''" (change)="filterByGenre($any($event.target).value)">
					<option value="">All</option>
					@for (genre of genreOptions(); track genre) {
						<option [value]="genre">{{ genre }}</option>
					}
				</select>
			</div>
			<div>
				<label class="label py-0 text-xs">Has Guitar</label>
				<select
					class="select select-xs select-bordered w-full"
					[value]="filter().hasGuitar === undefined ? '' : filter().hasGuitar!.toString()"
					(change)="filterByInstrument('guitar', $any($event.target).value)">
					<option value="">Any</option>
					<option value="true">Yes</option>
					<option value="false">No</option>
				</select>
			</div>
			<div>
				<label class="label py-0 text-xs">Guitar Diff</label>
				<select
					class="select select-xs select-bordered w-full"
					[value]="filter().guitarDiff || ''"
					(change)="filterByDifficulty('guitar', $any($event.target).value)">
					<option value="">Any</option>
					<option value="e">Easy</option>
					<option value="m">Medium</option>
					<option value="h">Hard</option>
					<option value="x">Expert</option>
				</select>
			</div>
			<div>
				<label class="label py-0 text-xs">Has Bass</label>
				<select
					class="select select-xs select-bordered w-full"
					[value]="filter().hasBass === undefined ? '' : filter().hasBass!.toString()"
					(change)="filterByInstrument('bass', $any($event.target).value)">
					<option value="">Any</option>
					<option value="true">Yes</option>
					<option value="false">No</option>
				</select>
			</div>
			<div>
				<label class="label py-0 text-xs">Has Drums</label>
				<select
					class="select select-xs select-bordered w-full"
					[value]="filter().hasDrums === undefined ? '' : filter().hasDrums!.toString()"
					(change)="filterByInstrument('drums', $any($event.target).value)">
					<option value="">Any</option>
					<option value="true">Yes</option>
					<option value="false">No</option>
				</select>
			</div>
			<div>
				<label class="label py-0 text-xs">Has Keys</label>
				<select
					class="select select-xs select-bordered w-full"
					[value]="filter().hasKeys === undefined ? '' : filter().hasKeys!.toString()"
					(change)="filterByInstrument('keys', $any($event.target).value)">
					<option value="">Any</option>
					<option value="true">Yes</option>
					<option value="false">No</option>
				</select>
			</div>
		</div>
	}

	@if (settingsService.libraryFolders.length === 0) {
		<div class="flex flex-1 flex-col items-center justify-center">
			<i class="bi bi-folder2-open text-6xl text-base-content/20 mb-4"></i>
			<h3 class="text-lg font-semibold mb-2">No Library Folders Set</h3>
			<p class="text-base-content/60 mb-4 text-center max-w-md">Add your Clone Hero/YARG chart library folders in Settings.</p>
			<button class="btn btn-primary" (click)="goToSettings()"><i class="bi bi-gear"></i> Go to Settings</button>
		</div>
	}

	@if (settingsService.libraryFolders.length > 0 && stats() && stats()!.totalCharts === 0 && !isScanning()) {
		<div class="flex flex-1 flex-col items-center justify-center">
			<i class="bi bi-music-note-list text-6xl text-base-content/20 mb-4"></i>
			<h3 class="text-lg font-semibold mb-2">No Charts Found</h3>
			<p class="text-base-content/60 mb-4 text-center max-w-md">No charts found. Make sure folders contain chart files.</p>
			<button class="btn btn-primary" (click)="scanLibrary()"><i class="bi bi-arrow-clockwise"></i> Rescan Library</button>
		</div>
	}

	@if (charts().length > 0 || isLoading()) {
		<div class="flex-1 overflow-y-auto scrollbar scrollbar-w-2 scrollbar-track-base-300 scrollbar-thumb-neutral scrollbar-thumb-rounded-full">
			<table class="table table-xs table-zebra table-pin-rows w-full">
				<thead>
					<tr class="bg-base-200">
						<th class="w-8"><input type="checkbox" class="checkbox checkbox-xs" [checked]="allSelected()" (change)="selectAll()" /></th>
						<th class="cursor-pointer hover:bg-base-300" (click)="sortBy('artist')">Artist{{ getSortIndicator('artist') }}</th>
						<th class="cursor-pointer hover:bg-base-300" (click)="sortBy('name')">Song{{ getSortIndicator('name') }}</th>
						<th class="cursor-pointer hover:bg-base-300" (click)="sortBy('charter')">Charter{{ getSortIndicator('charter') }}</th>
						<th class="w-20 text-center" title="Instruments">Inst</th>
						<th class="w-20 text-center" title="Guitar Difficulties">Gtr</th>
						<th class="w-14 text-center cursor-pointer hover:bg-base-300" (click)="sortBy('chartType')" title="Chart Type">
							Type{{ getSortIndicator('chartType') }}
						</th>
						<th class="w-8 text-center" title="Has Video">V</th>
						<th class="w-8 text-center" title="Has Background">B</th>
						<th class="w-8 text-center" title="Has Album Art">A</th>
						<th class="w-8 text-center" title="Has Lyrics">L</th>
						<th class="w-14"></th>
					</tr>
				</thead>
				<tbody>
					@for (chart of displayedCharts(); track chart) {
						<tr
							[class.bg-primary]="isSelected(chart)"
							class="cursor-pointer"
							(mouseenter)="hoveredChartId.set(chart.id)"
							(mouseleave)="hoveredChartId.set(null)">
							<td [style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null">
								<input type="checkbox" class="checkbox checkbox-xs" [checked]="isSelected(chart)" (change)="toggleSelection(chart)" />
							</td>
							<td
								[style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null"
								class="truncate max-w-[150px]"
								[title]="chart.artist">
								{{ chart.artist }}
							</td>
							<td
								[style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null"
								class="truncate max-w-[150px]"
								[title]="chart.name">
								{{ chart.name }}
							</td>
							<td
								[style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null"
								class="truncate max-w-[80px]"
								[title]="chart.charter">
								<span [innerHTML]="renderCharterName(chart.charter)"></span>
							</td>
							<td [style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null" class="text-center">
								<div class="flex justify-center gap-0.5 text-xs">
									@if (chart.hasGuitar) {
										<span class="badge badge-xs badge-primary" title="Guitar">G</span>
									}
									@if (chart.hasBass) {
										<span class="badge badge-xs badge-secondary" title="Bass">B</span>
									}
									@if (chart.hasDrums) {
										<span class="badge badge-xs badge-accent" title="Drums">D</span>
									}
									@if (chart.hasKeys) {
										<span class="badge badge-xs badge-info" title="Keys">K</span>
									}
									@if (chart.hasVocals) {
										<span class="badge badge-xs badge-warning" title="Vocals">V</span>
									}
									@if (chart.hasGHL) {
										<span class="badge badge-xs badge-neutral" title="Guitar Hero Live (6-fret)">GHL</span>
									}
								</div>
							</td>
							<td
								[style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null"
								class="text-center text-xs font-mono"
								[title]="'Guitar: ' + (chart.guitarDiffs || 'none')">
								{{ formatDiffs(chart.guitarDiffs) }}
							</td>
							<td [style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null" class="text-center">
								<span class="badge badge-xs" [class.badge-success]="chart.chartType === 'mid'" [class.badge-warning]="chart.chartType === 'chart'">{{
									chart.chartType || '?'
								}}</span>
							</td>
							<td [style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null" class="text-center">
								@if (chart.hasVideo) {
									<button class="btn btn-xs btn-ghost text-success" (click)="deleteVideo(chart)" title="Has video - click to delete">✓</button>
								}
								@if (!chart.hasVideo) {
									<button class="btn btn-xs btn-ghost text-error" (click)="goToVideo(chart)" title="No video - click to add">✗</button>
								}
							</td>
							<td [style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null" class="text-center">
								@if (chart.hasBackground) {
									<button class="btn btn-xs btn-ghost text-success" (click)="deleteBackground(chart)" title="Has background - click to delete">
										✓
									</button>
								}
								@if (!chart.hasBackground) {
									<button class="btn btn-xs btn-ghost text-error" (click)="goToArt(chart, 'background')" title="No background - click to add">
										✗
									</button>
								}
							</td>
							<td [style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null" class="text-center">
								@if (chart.hasAlbumArt) {
									<div class="relative inline-block group">
										<button class="btn btn-xs btn-ghost text-success" (click)="deleteAlbumArt(chart)" title="Has album art - click to delete">
											✓
										</button>
										<!-- Album art preview tooltip - appears below to avoid overflow clipping -->
										<div class="absolute left-1/2 -translate-x-1/2 top-full mt-1 hidden group-hover:block pointer-events-none" style="z-index: 9999">
											<div class="absolute bottom-full left-1/2 -translate-x-1/2 border-8 border-transparent border-b-base-300"></div>
											<div class="bg-base-300 rounded-lg shadow-2xl p-1 border border-base-content/20" style="width: 136px; height: 136px">
												@if (getAlbumArtUrl(chart)) {
													<img
														[src]="getAlbumArtUrl(chart)"
														style="width: 128px; height: 128px; object-fit: cover; border-radius: 4px"
														alt="Album art" />
												}
												@if (!getAlbumArtUrl(chart)) {
													<div style="width: 128px; height: 128px; display: flex; align-items: center; justify-content: center">
														<span class="loading loading-spinner"></span>
													</div>
												}
											</div>
										</div>
									</div>
								}
								@if (!chart.hasAlbumArt) {
									<button class="btn btn-xs btn-ghost text-error" (click)="goToArt(chart, 'album')" title="No album art - click to add">✗</button>
								}
							</td>
							<td [style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null" class="text-center">
								@if (chart.hasLyrics) {
									<button class="btn btn-xs btn-ghost text-success" (click)="deleteLyrics(chart)" title="Has lyrics - click to delete">✓</button>
								}
								@if (!chart.hasLyrics) {
									<button class="btn btn-xs btn-ghost text-error" (click)="goToLyrics(chart)" title="No lyrics - click to add">✗</button>
								}
							</td>
							<td [style.background-color]="hoveredChartId() === chart.id && !isSelected(chart) ? '#000' : null">
								<div class="flex gap-0.5">
									<button class="btn btn-xs btn-ghost" (click)="openFolder(chart)" title="Open folder"><i class="bi bi-folder2-open"></i></button>
									<button class="btn btn-xs btn-ghost" (click)="editChart(chart)" title="Edit"><i class="bi bi-pencil"></i></button>
									<button class="btn btn-xs btn-ghost text-error" (click)="confirmDeleteChart(chart)" title="Delete chart">
										<i class="bi bi-trash"></i>
									</button>
								</div>
							</td>
						</tr>
					}
				</tbody>
			</table>

			<!-- Infinite scroll sentinel and loading indicator -->
			<div #scrollSentinel class="flex justify-center py-4">
				@if (isLoadingMore()) {
					<div class="flex items-center gap-2 text-base-content/60">
						<span class="loading loading-spinner loading-sm"></span>
						<span class="text-sm">Loading more charts...</span>
					</div>
				} @else if (hasMore()) {
					<button class="btn btn-sm btn-ghost" (click)="loadMore()">
						<i class="bi bi-arrow-down-circle"></i>
						Load more ({{ totalFilteredCount() - charts().length }} remaining)
					</button>
				} @else if (charts().length > 0) {
					<span class="text-xs text-base-content/40">All {{ charts().length }} charts loaded</span>
				}
			</div>
		</div>
	}

	<!-- Edit Chart Modal -->
	<div class="modal" [class.modal-open]="editingChart()">
		<div class="modal-box bg-base-100">
			<button class="btn btn-sm btn-circle btn-ghost absolute right-3 top-3" (click)="cancelEdit()">
				<i class="bi bi-x-lg"></i>
			</button>
			<h3 class="font-bold text-lg mb-6">Edit Chart Metadata</h3>
			@if (editingChart()) {
				<div class="flex flex-col gap-4">
					<div class="form-control">
						<label class="label pb-1 pt-0"><span class="label-text font-medium">Song Name</span></label>
						<input type="text" class="input input-bordered input-sm" [ngModel]="editingChart()!.name" (ngModelChange)="updateEditingChart('name', $event)" />
					</div>
					<div class="form-control">
						<label class="label pb-1 pt-0"><span class="label-text font-medium">Artist</span></label>
						<input type="text" class="input input-bordered input-sm" [ngModel]="editingChart()!.artist" (ngModelChange)="updateEditingChart('artist', $event)" />
					</div>
					<div class="form-control">
						<label class="label pb-1 pt-0"><span class="label-text font-medium">Album</span></label>
						<input type="text" class="input input-bordered input-sm" [ngModel]="editingChart()!.album" (ngModelChange)="updateEditingChart('album', $event)" />
					</div>
					<div class="grid grid-cols-2 gap-4">
						<div class="form-control">
							<label class="label pb-1 pt-0"><span class="label-text font-medium">Genre</span></label>
							<input type="text" class="input input-bordered input-sm" [ngModel]="editingChart()!.genre" (ngModelChange)="updateEditingChart('genre', $event)" />
						</div>
						<div class="form-control">
							<label class="label pb-1 pt-0"><span class="label-text font-medium">Year</span></label>
							<input type="number" class="input input-bordered input-sm" [ngModel]="editingChart()!.year" (ngModelChange)="updateEditingChart('year', $event)" />
						</div>
					</div>
					<div class="form-control">
						<label class="label pb-1 pt-0"><span class="label-text font-medium">Charter</span></label>
						<input type="text" class="input input-bordered input-sm" [ngModel]="editingChart()!.charter" (ngModelChange)="updateEditingChart('charter', $event)" />
					</div>
				</div>
			}
			<div class="modal-action mt-6">
				<button class="btn btn-ghost" (click)="cancelEdit()">Cancel</button>
				<button class="btn btn-primary" (click)="saveChart()">Save</button>
			</div>
		</div>
		<div class="modal-backdrop" (click)="cancelEdit()"></div>
	</div>

	<!-- Delete Confirmation Modal -->
	<div class="modal" [class.modal-open]="showDeleteConfirm()">
		<div class="modal-box bg-base-100">
			<button class="btn btn-sm btn-circle btn-ghost absolute right-3 top-3" (click)="cancelDelete()">
				<i class="bi bi-x-lg"></i>
			</button>
			<h3 class="font-bold text-lg mb-4">Delete Chart?</h3>

			<!-- Error in modal -->
			@if (deleteError() && showDeleteConfirm()) {
				<div class="alert alert-error mb-4">
					<i class="bi bi-exclamation-triangle"></i>
					<div class="text-sm whitespace-pre-wrap">{{ deleteError() }}</div>
				</div>
			}

			@if (chartToDelete()) {
				<div>
					<p class="mb-3 text-base-content/80">Are you sure you want to permanently delete this chart?</p>
					<div class="p-4 bg-base-200 rounded-lg mb-4">
						<div class="font-semibold">{{ chartToDelete()!.name }}</div>
						<div class="text-sm text-base-content/60 mt-1">{{ chartToDelete()!.artist }}</div>
						<div class="text-xs text-base-content/40 mt-2 truncate font-mono" [title]="chartToDelete()!.path">{{ chartToDelete()!.path }}</div>
					</div>
					<div class="flex items-start gap-2 text-sm text-error">
						<i class="bi bi-exclamation-triangle mt-0.5"></i>
						<span>This action cannot be undone. The chart folder and all its contents will be permanently deleted.</span>
					</div>
				</div>
			}
			<div class="modal-action mt-6">
				<button class="btn btn-ghost" (click)="cancelDelete()">Cancel</button>
				<button class="btn btn-error" (click)="executeDelete()"><i class="bi bi-trash"></i> Delete</button>
			</div>
		</div>
		<div class="modal-backdrop" (click)="cancelDelete()"></div>
	</div>

	<!-- Bulk Delete Confirmation Modal -->
	<div class="modal" [class.modal-open]="showBulkDeleteConfirm()">
		<div class="modal-box bg-base-100">
			<button class="btn btn-sm btn-circle btn-ghost absolute right-3 top-3" (click)="cancelBulkDelete()">
				<i class="bi bi-x-lg"></i>
			</button>
			<h3 class="font-bold text-lg mb-4">Delete {{ selectedIds().size }} Charts?</h3>

			<p class="mb-4 text-base-content/80">Are you sure you want to permanently delete {{ selectedIds().size }} selected chart(s)?</p>

			<div class="flex items-start gap-2 text-sm text-error">
				<i class="bi bi-exclamation-triangle mt-0.5"></i>
				<span>This action cannot be undone. All selected chart folders and their contents will be permanently deleted.</span>
			</div>

			<div class="modal-action mt-6">
				<button class="btn btn-ghost" (click)="cancelBulkDelete()">Cancel</button>
				<button class="btn btn-error" (click)="executeBulkDelete()"><i class="bi bi-trash"></i> Delete {{ selectedIds().size }} Charts</button>
			</div>
		</div>
		<div class="modal-backdrop" (click)="cancelBulkDelete()"></div>
	</div>

	<!-- Asset Delete Confirmation Modal -->
	<div class="modal" [class.modal-open]="showAssetDeleteConfirm()">
		<div class="modal-box bg-base-100">
			<button class="btn btn-sm btn-circle btn-ghost absolute right-3 top-3" (click)="cancelAssetDelete()">
				<i class="bi bi-x-lg"></i>
			</button>
			<h3 class="font-bold text-lg mb-4">Delete {{ assetDeleteType() }}?</h3>

			@if (assetDeleteChart()) {
				<p class="mb-3 text-base-content/80">Are you sure you want to delete the {{ assetDeleteType()?.toLowerCase() }} from this chart?</p>
				<div class="p-4 bg-base-200 rounded-lg mb-4">
					<div class="font-semibold">{{ assetDeleteChart()!.name }}</div>
					<div class="text-sm text-base-content/60 mt-1">{{ assetDeleteChart()!.artist }}</div>
				</div>
			}

			<div class="modal-action mt-6">
				<button class="btn btn-ghost" (click)="cancelAssetDelete()">Cancel</button>
				<button class="btn btn-error" (click)="executeAssetDelete()"><i class="bi bi-trash"></i> Delete</button>
			</div>
		</div>
		<div class="modal-backdrop" (click)="cancelAssetDelete()"></div>
	</div>
</div>
